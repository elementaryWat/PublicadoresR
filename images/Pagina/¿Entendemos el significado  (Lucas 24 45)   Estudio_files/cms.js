/*! jworg-content-theme - v0.1.0 - 2015-02-05 01:34:47 PM UTC */
!function(){"use strict";var a=module.require("settings");a.setSettings({ARCHIVE_MIMETYPE:"application/zip",AUDIO_FORMATS:"MP3,AAC",AUDIO_STREAM_MIMETYPE:"audio/mpeg",VIDEO_STREAM_MIMETYPES:["video/mp4","video/x-m4v","video/x-w4v"],WINDOW_WIDTH:640,WINDOW_HEIGHT:600,STREAMING_CLASS:"streaming",HIGHLIGHT_CLASS:"contentHighlight",BASE_URL:function(){return $("base").attr("href")},DOWNLOAD_WINDOW_URL:function(){return a.getSetting("BASE_URL")+"download/"},THEME_URL:function(){return a.getSetting("BASE_URL")+"themes/content-theme/"},IS_MOBILE_LAYOUT:function(){return $(window).width()<520},IS_RTL:function(){return $("body").hasClass("dir-rtl")},USE_DOWNLOAD_WINDOW:function(){return a.getPageConfig("ACCESSIBILITY_MODE")||$(window).width()<=768},AUDIO_ICON:function(){return a.getSetting("THEME_URL")+"images/icon_audio.png"},WRITTEN_ICON:function(){return a.getSetting("THEME_URL")+"images/icon_digitalPub.png"},VIDEO_ICON:function(){return a.getSetting("THEME_URL")+"images/icon_video.png"},VIDEO_THUMBNAIL:function(){return a.getSetting("THEME_URL")+"images/video_placeholder.png"},TEMPLATE_URL:function(){return a.getSetting("JS_CORE_BASE")+"/templates/"}})}(),function(a,b){"use strict";function c(){var b;g.send("DOMReady"),e.DOMReady();for(b in e)e.hasOwnProperty(b)&&"function"==typeof e[b].DOMReady&&e[b].DOMReady();$("body").addClass("jsPageReady").focus(),$(a).on("beforeunload",function(){$("body").removeClass("jsPageReady")}),g.send("PageBooted")}var d,e,f=module.require("settings"),g=module.require("signal");d={DOMReady:function(){this.setContentAttributes(),this.setLanguageCookie(),$('a[href*="#"]').click(function(){var a,b,c,d;a=$(this).attr("href"),b=a.split("#"),c=b[b.length-1],d=$("#"+c),d.attr("tabIndex",0),d.css("outline","none"),d.focus()})},setContentAttributes:function(){var a=f.getPageConfig("CONTENT_LANG"),b=f.getPageConfig("CONTENT_LANG_DIRECTION"),c="lang-"+a,d="dir-"+b;$("#article").addClass(c+" "+d),$("#article").attr({lang:a,"xml:lang":a,dir:b})},setLanguageCookie:function(){var a=f.getPageConfig("WT_LANG"),b=(new Date).getTime(),c=31536e6,d={};d.path="/",d.expires=new Date(b+c),$.cookie("ckLang",a,d)}},a._t=a._t||a.opener._t,e=a.jworg=Object.create(d),$(b).ready(c)}(window,window.document),function(){"use strict";var a,b,c=module.require("settings"),d=module.require("signal");a={autoScroll:!0,actions:{},CSS_SLIDE_PROPERTY:c.getSetting("IS_RTL")?"right":"left",bindActions:function(){$(document).off("click","#slidePrevButton, #slideShadowLeft",this.actions.prevButton).on("click","#slidePrevButton, #slideShadowLeft",this.actions.prevButton),$(document).off("click","#slideNextButton, #slideShadowRight",this.actions.nextButton).on("click","#slideNextButton, #slideShadowRight",this.actions.nextButton),this.openButton.off("click",this.actions.openButton).on("click",this.actions.openButton),this.closeButton.off("click",this.actions.closeButton).on("click",this.actions.closeButton)},balanceSlides:function(a){a=a||-1;var b,d,e,f=this.getIndex(),g=this.getSlides(),h=this.getNumSlides(),i=this.getSlideList(),j=(h+1)/2;for(a*=c.getSetting("IS_RTL")?-1:1,b=0>a||Math.floor(j)===j?-1:0,j=Math.floor(j+b);f!==j;)j>f?(d=g.last(),i.prepend(d),f++):(d=g.first(),i.append(d),f--),e=-(100*f)+"%",i.css(this.CSS_SLIDE_PROPERTY,e)},DOMReady:function(){if(0!==this.getSlideMain().length){this.openButton=this.getSlideMain().find(".jsDescrControl.jsOpen"),this.closeButton=this.getSlideMain().find(".jsDescrControl.jsClose"),this.shuffleSlides(),this.balanceSlides();var a=$.proxy(this.resizeSlider,this);a(),$(window).resize(a),setTimeout(a,500),this.bindActions(),this.isPreviewPage()||this.startAutoScrollDaemon(8e3),this.updateDescription()}},generateActions:function(){var a=this;return this.actions.closeButton=function(){a.closeButton.hide(),a.openButton.show(),a.getSliderContainer().slideUp()},this.actions.openButton=function(){a.isAnimating()||(a.stopAutoScroll(),a.openButton.hide(),a.closeButton.show(),a.getSliderContainer().slideDown())},this.actions.nextButton=function(){a.stopAutoScroll(),a.nextSlide()},this.actions.prevButton=function(){a.stopAutoScroll(),a.prevSlide()},this.actions},getActiveSlide:function(){var a=this.getIndex(),b=this.getSlides();return b.slice(a,a+1)},getActiveSlideDescription:function(){var a=this.getActiveSlide();return a.find("div.jsImgDescr")},getDescriptionContainer:function(){return $("#sliderImgDescr .inner .imgDesc")},getSliderContainer:function(){return $("#sliderImgDescr .inner")},getIndex:function(){if(this.isAnimating())return-1;var a,b=this.getSlideList().css(this.CSS_SLIDE_PROPERTY),c=-1!==b.indexOf("%"),d=this.getSlideWidth();return b=b.replace(/[^0-9\.]/gi,""),b=parseInt(b,10)||0,c?b/100:a=Math.round(b/d,2)},getNumSlides:function(){return this.getSlides().length},getSlideList:function(){return $("#slideList")},getSlideMain:function(){return $("#slideMain")},getSlides:function(){return this.getSlideList().find(".jsSliderItem")},getSlideWidth:function(){return this.getSlideMain().width()},isAnimating:function(){return!!this.animationLock},isPreviewPage:function(){return $("body").hasClass("SlidePreviewPage")},nextSlide:function(){if(!this.isAnimating()){this.balanceSlides(-1);var a=this.getIndex();a+=c.getSetting("IS_RTL")?-1:1,this.changeSlide(a)}},prevSlide:function(){if(!this.isAnimating()){this.balanceSlides(1);var a=this.getIndex();a+=c.getSetting("IS_RTL")?1:-1,this.changeSlide(a)}},randomSort:function(){var a=1e3,b=parseInt(Math.random()*a,10),c=b%2,d=b>a/2?1:-1;return c*d},resizeSlider:function(){var a=this.getSlideWidth(),b=this.getSlideList(),c=this.getSlideList().find(".jsSliderItem, .jsSliderItem > img"),d=this.getIndex();c.css("width",a),b.css("width",a*this.getNumSlides()),this.changeSlide(d)},setDescriptionContents:function(a){var b=this.getDescriptionContainer();b.html(a)},changeSlide:function(a){var b=-(100*a)+"%",c=this.getIndex(),d={},e=this;this.isAnimating()||0>a||c===a||(this.animationLock=!0,d[this.CSS_SLIDE_PROPERTY]=b,this.getSlideList().animate(d,"slow",function(){e.animationLock=!1,e.balanceSlides(c-a),e.updateDescription()}))},shuffleSlides:function(){var a,b=this.getSlides(),c=10;for(a=0;c>a;a++)b=b.sort(this.randomSort);b.remove(),this.getSlideList().append(b)},startAutoScroll:function(){this.autoScroll=!0},startAutoScrollDaemon:function(a){var b,d=this;a=a||1e3,b=function(){d.autoScroll&&(c.getSetting("IS_RTL")?d.prevSlide():d.nextSlide()),setTimeout(b,a)},setTimeout(b,a)},stopAutoScroll:function(){this.autoScroll=!1},updateDescription:function(){var a=this.getActiveSlideDescription().html();this.setDescriptionContents(a)}},b=window.jworg.slider=Object.create(a),b.generateActions(),d.listen("simple-modal-before-show",b.stopAutoScroll.bind(b))}(),function(){"use strict";var a,b,c,d=module.require("base64"),e=module.require("guid"),f=module.require("url");c=function(){var a,b,c,d,g=$("#insightAnalytics");a=f.parse("?"+g.data("params")).query,b=f.parse().hash.query,c=$.extend(a,b.insight),delete c.length;for(d in c)c.hasOwnProperty(d)&&("<guid>"===c[d]&&(c[d]=e.generate()),g.data(d,c[d]));return c},a=function(){var a="",b=window,c=document;try{a=b.top.document.referrer}catch(d){if(b.parent)try{a=b.parent.document.referrer}catch(e){a=""}}return""===a&&(a=c.referrer),a},(b=function(){var b,e,g,h,i=$("#insightAnalytics");!$("#insight").exists()&&i.exists()&&(b=i.data("src"),e=c(),g=a(),e.ref=d.encode(g),e.id=$("body").data("insight-id"),b=f.build({path:b,query:e}),h=$('<img id="insight" class="trackingImg" />'),h.attr("src",b),$("#copyright").append(h))})()}(),function(){"use strict";var a,b=0;a={open:function(){b++;var a=$("#jsLoadingIndicator");a.exists()||(a=$("<div id='jsLoadingIndicator'><div class='inner'></div></div>"),a.css("opacity",0),$("body").append(a),a.animate({opacity:1}))},close:function(){if(b--,!(b>0)){b=0;var a=$("#jsLoadingIndicator");a.animate({opacity:0}),a.promise().done(function(){$(this).remove()})}}},module.define("loadingIndicator",a)}(),function(){"use strict";var a,b,c=module.require("settings");a=function(){this.child=void 0,this.setURL(),this.setTitle(),this.setOptions()},a.prototype={assembleOptionsString:function(){var a,b=this.options,c=[];for(a in b)b.hasOwnProperty(a)&&(b[a]===!0&&(b[a]="yes"),b[a]===!1&&(b[a]="no"),c.push(a+"="+b[a]));return c.join(",")},close:function(){this.child&&(this.child.close(),this.child=void 0)},open:function(){var a,c=this.assembleOptionsString();return b&&b.close(),this.child=window.open(this.url,this.title,c),b=this,a=this.child.document,this.child},setOptions:function(a){var b,d;d={resizable:!0,scrollbars:!1,width:c.getSetting("WINDOW_WIDTH"),height:c.getSetting("WINDOW_HEIGHT"),menubar:!1,toolbar:!1,location:!1},a=a||{};for(b in a)a.hasOwnProperty(b)&&null===a[b]&&delete a[b];this.options=$.extend(!0,d,this.options,a)},setURL:function(a){this.url=a||""},setTitle:function(a){this.title=a||"_blank"}},module.define("ChildWindow",a)}(),function(){"use strict";var a,b,c=module.require("settings"),d=module.require("signal");b=function(a,d){this.html=$("<div>"),this.html.addClass("jsSimpleModalContainer"),d||(this.closeButton=$('<a class="closeModal jsCloseModal" href="javascript:;">'+_t("CMSPUBS.LnkCloseUppCase")+"</a>"),this.closeButton.click(b.close),this.html.append(this.closeButton)),this.html.append($(a)),this.settings={},this.updateSettings({maxWidth:c.getSetting("WINDOW_WIDTH"),maxHeight:c.getSetting("WINDOW_HEIGHT")})},b.close=function(){a&&a._close()},b.prototype={_close:function(){var b=this.elements,c=this;clearTimeout(this.__positionTimer),this.settings.beforeClose(),b.animate({opacity:0},200,function(){b.remove(),a=null,c.settings.afterClose()})},updateSettings:function(a){var b=this.html,c=a.beforeShow,e=a.afterShow,f=a.beforeClose,g=a.afterClose;a.beforeShow=$.proxy(function(){$("body").css("overflow","hidden"),d.send("simple-modal-before-show"),"function"==typeof c&&c()},this),a.afterShow=$.proxy(function(){var a=b.find("h1, h2, h3, h4, h5").filter(":first");b.trap(),a.attr("tabIndex",0),a.css("outline","none"),a.focus(),"function"==typeof e&&e()},this),a.beforeClose=$.proxy(function(){b.untrap(),"function"==typeof f&&f()},this),a.afterClose=$.proxy(function(){$("body").css("overflow","auto"),"function"==typeof g&&g()},this),this.settings=$.extend(this.settings,a)},open:function(){b.close(),a=this;var c,d=$("<div>"),e=$("<div>"),f=this;e.addClass("jsSimpleModalOverlay"),e.click(b.close),d.addClass("jsSimpleModalWrapper"),d.html(this.html),d.css({"max-width":this.settings.maxWidth,"max-height":this.settings.maxHeight,width:this.settings.width,height:this.settings.height}),this.elements=d.add(e),$("body").append(this.elements),c=function(){var a,b,g,h,i=$(document).scrollTop();a=(e.height()-d.height())/2,a+=i,a=Math.max(i,a),b=(e.width()-d.width())/2,g=Math.min($(window).height(),f.settings.maxHeight),h=Math.min($(window).width(),f.settings.maxWidth),d.css({top:a,left:b,height:g,maxWidth:h}),clearTimeout(f.__positionTimer),f.__positionTimer=setTimeout(c,500)},c(),$(window).resize(c),this.__positionTimer=setTimeout(c,500),this.settings.beforeShow(),e.animate({opacity:.5},200),d.animate({opacity:1},300,this.settings.afterShow)}},module.define("SimpleModal",b),$(document).on("click","a.jsCloseModal",b.close).on("keydown",null,"esc",b.close)}(),function(){"use strict";var a,b=module.require("MediaPlayer"),c=module.require("PubMediaResource"),d=module.require("browser"),e=module.require("signal"),f="jsExcludeMobilePin";a=Class.extend({init:function(a,b){if(!a.exists())throw new Error("Element does not exist");var c=a.data("filetype"),d=a.data("langindex"),e=$.proxy(this.__initPlayer,this),g=a.parent(".jsVideoPlayer, .jsAudioPlayer"),h=this;d=parseInt(d,10),d=0===d||d>0?d:void 0,this.elem=a,this.parent=g,this.mediaList=b,this.autoPlay=a.hasClass("autoplay"),this.isVideo=a.parent().hasClass("jsVideoPlayer"),this.__generatePlayerID(),this.loadPending=b.listLanguages().then(function(a){return void 0===d&&a.length>1&&h.__buildSpokenLangSelector(a),d=d||0,b.hasSubtitles(d||0,c)}).then(function(a){return b.getPlaylist().build(d,c,a===b.SUBTITLES_ONLY).done(e)}),g.addClass(f),this.loadPending.done(function(){g.show()})},getPlayer:function(){return this.player},loading:function(){return this.loadPending},remove:function(){},startAutoPlayDaemon:function(){var a=this;!function b(){return d.isIOS()||d.isAndroid()?void 0:"IDLE"===a.player.getStatus()?void a.player.play():void setTimeout(b,500)}()},__attachEventHandlers:function(){var a,b,c=this.__getPlayerID(),d=this.getPlayer();b=function(a){a.preventDefault();var b=d.getPlaylistIndex(),c=parseInt($(this).data("track"),10);void 0!==b&&("PLAYING"!==d.getStatus()&&c===b?d.play():"PLAYING"!==d.getStatus()||c!==b?(d.skipTo(c),d.play()):d.pause())},a='a.jsTrackPlay[data-mediaplayer="%s"],a.jsTrackPause[data-mediaplayer="%s"]',a=a.format(c,c),$(document).on("click",a,b),e.listen("mediaPause",d.pause.bind(d)),this.remove=function(){$(document).off("click",a),d.remove()}},__buildSpokenLangSelector:function(a){var b,c,d=this,e=[];return c=$("<select></select>"),c.addClass("selectSpokenLanguage"),$(a).each(function(a){var b=d.mediaList.getPlaylist().build(a),f=d.mediaList.getLanguageName(a),g=$.when(b,f);g.done(function(a,b){var d=$("<option></option>");d.html(b),d.data("playlist",a),c.append(d)}),e.push(g)}),b=$.when.apply($,e),b=b.then(function(){return c.on("change",function(){var a=$(this).children("option:selected").data("playlist");d.player.setPlaylist(a)}),d.elem.before(c),$(".jsPlayUppCaseLabel").show(),c})},__generatePlayerID:function(){var a=this.elem.attr("id");a||(a=Math.floor(1e4*Math.random()),a="mediaPlayer-%s".format(a),this.elem.attr("id",a))},__getPlayerID:function(){return this.elem.attr("id")},__initPlayer:function(a){var c=["play","pause","trackChanged","idle","playlistItemComplete"],d=$.proxy(this.__updatePlayerUI,this);if(a.length)return this.player=new b(this.elem,a,this.isVideo),this.player.bind(c,d),this.__attachEventHandlers(),this.autoPlay&&this.startAutoPlayDaemon(),this.player},__updatePlayerUI:function(){var a,b,c,d,e=this.__getPlayerID(),g=$("*[data-mediaplayer="+e+"]"),h=this.player.getStatus(),i=this.player.getCurrentTrack(),j=this.player.getPlaylistIndex();a=g.filter(".jsTrackPlay, .jsTrackPause"),b=g.filter(".jsTrackPlay[data-track="+j+"],.jsTrackPause[data-track="+j+"]"),c=g.filter(".jsTrackPlay[data-track!="+j+"],.jsTrackPause[data-track!="+j+"]"),b.removeClass("jsTrackInactive"),b.addClass("jsTrackActive"),c.removeClass("jsTrackActive"),c.addClass("jsTrackInactive"),"PLAYING"===h?(b.removeClass("jsTrackPlay"),b.addClass("jsTrackPause"),c.removeClass("jsTrackPause"),c.addClass("jsTrackPlay"),this.parent.removeClass(f)):(a.removeClass("jsTrackPause"),a.addClass("jsTrackPlay")),d=i.title||i.sources[0].title,g.filter(".jsCurrentTrack").show().html(d)}}),a.from_url=function(b,d){var e,f;return e=function(b){return new a(d,b)},f=new c(b,!0),new a(d,f)},module.define("StreamingController",a)}(),function(){"use strict";var a,b=module.require("UIController"),c=module.require("SimpleModal"),d=module.require("MediaPlayer"),e=module.require("StreamingController");a=b.extend({MODAL_CONFIG:{width:"95%",height:"auto"},open:function(a){var b=this;this.injectCallback=a,this._draw().fail(function(){b._injectHTML(d.GENERIC_ERROR)})},_beforeClose:function(){var a=this.streaming&&this.streaming.getPlayer();a&&"IDLE"!==this.streaming.getPlayer().getStatus()&&this.streaming.getPlayer().stop()},_initStreaming:function(a){var b=this.html.find(".jsMediaPlayer");!this.streaming&&b.exists()&&(this.streaming=new e(b,a))},_injectHTML:function(a){var b=!1;this._super(a),this.container||(this.container=$("<div></div>"),b=!0),this.streaming&&(this.streaming.remove(),delete this.streaming),this.container.empty().html(a),b&&(this.injectCallback?this.injectCallback(this.container):this._openModal(this.container))},_openModal:function(a){var b,d;b=new c(a),d=$.extend({},{beforeClose:this._beforeClose.bind(this)},this.MODAL_CONFIG),b.updateSettings(d),b.open()},_pausePlayer:function(){this.streaming&&this.streaming.getPlayer()&&this.streaming.getPlayer().pause()},_updateStreamingPlaylist:function(a,b,c,d){var e,f;this.streaming?(e=this.streaming.getPlayer(),e&&(f=$.proxy(e.setPlaylist,e),d.getPlaylist().build(a,b,c).then(f))):this._initStreaming(d)}}),module.define("MediaModal",a)}(),function(){"use strict";var a,b=module.require("settings"),c=module.require("MediaModal");a=c.extend({TEMPLATE_NAME:"DownloadModal",init:function(a){this._super(),this.resource=a},setCoverImage:function(a){this.coverImage=a},onLanguageChange:function(a,b){var c=$(this),d=b.controller.html.find("ul.tracklist"),e=c.data("index")||0;b.controller._pausePlayer(),d.removeClass(b.state.activeLanguage.locale),b.state.activeLanguage=_.extend({},_.find(b.state.languages,function(a){return a.index===e})),d.addClass(b.state.activeLanguage.locale),_.each(b.state.languages,function(a,c){b.state.languages[c].isActive=a.index===e}),b.controller.resource.listFileTypes(e).then(function(a){b.state.fileTypes=a,b.state.showFileTypeSelector=a.length>1,b.controller.html.find(".jsFileTypeSwitcher").change()})},onFileTypeChange:function(a,c){var d=c.state.activeFileType.name=$(this).val(),e=-1!==b.getSetting("AUDIO_FORMATS").indexOf(d);c.controller._pausePlayer(),c.state.icon=b.getSetting(e?"AUDIO_ICON":"WRITTEN_ICON"),c.controller._buildFileList(c)},_buildFileList:function(a){var c=this,d=a.state.activeLanguage.code,e=a.state.activeFileType.name,f=this.resource.listFiles(d,e);return f=f.then(function(d){var e;return a.state.streamable=!1,e=_.groupBy(d,function(a){return a.specialty||a.format||a.edition}),e=_.map(e,function(c){var d=_.first(c),e={};return e.name=d.specialtyDescr||d.formatDescr||d.editionDescr,e.archives=_.filter(c,function(a){return a.mimetype===b.getSetting("ARCHIVE_MIMETYPE")}),e.tracks=_.filter(c,function(a){return a.mimetype!==b.getSetting("ARCHIVE_MIMETYPE")}),_.each(e.tracks,function(c,d){e.tracks[d].index=d,c.mimetype===b.getSetting("AUDIO_STREAM_MIMETYPE")&&(a.state.streamable=!0)}),e}),a.state.variants=e,a.state.multiVariant=e.length>1,c._redraw()}),f=f.then(function(){a.state.streamable&&c._updateStreamingPlaylist(d,e)})},_buildStateContext:function(){var a,b,c,d,e,f=this;return a=this.resource.listLanguages().then(function(a){return _.each(a,function(b,c){a[c].isActive=!1}),a}),d=a.then(function(a){return _.filter(a,function(a){return a.isPrimary})}),e=a.then(function(a){return _.filter(a,function(a){return!a.isPrimary})}),b=d.then(function(a){return _.extend({},_.first(a))}),c=b.then(function(a){return f.resource.listFileTypes(a.code)}),{activeLanguage:b,activeFileType:c.then(function(a){return _.first(a)}),archives:[],coverImage:this.coverImage,date:this.resource.getFormattedDate(),fileTypes:c,tracks:[],icon:null,languages:a,primaryLanguages:d,otherLanguages:e,pubName:this.resource.getPubName(),streamable:!1,showFileTypeSelector:!1}},_injectHTML:function(a){this._super(a),this._initStreaming(this.resource)},_onFirstRender:function(){this.html.find("ul.languageTabs li:first").click()},_updateStreamingPlaylist:function(a,b,c,d){return d=d||this.resource,this._super(a,b,c,d)}}),module.define("DownloadModal",a)}(),function(){"use strict";var a,b=module.require("settings"),c=module.require("PubMediaResource"),d=module.require("DownloadModal");a=d.extend({TEMPLATE_NAME:"BibleModal",onBookSelect:function(a,b){var c,d=$(this).data("booknum"),e=b.controller,f=e.__getBookResource(d),g=e.html.find(".book h2"),h=g.filter('[data-booknum="'+d+'"]'),i=h.parent().next().children("h2"),j=b.state.activeLanguage.code,k=b.state.activeFileType.name;return a.preventDefault(),c=function(){i.exists()&&e.onBookSelect.call(i,a,b).then(function(){e.streaming.startAutoPlayDaemon()})},g.removeClass("viewHdgExpand"),g.addClass("viewHdgCollapse"),d=parseInt(d,10),b.state.activeBookNum===d?(b.state.streamable=!1,b.state.activeBookNum=null):(b.state.streamable=!0,b.state.activeBookNum=d,h.addClass("viewHdgExpand"),h.removeClass("viewHdgCollapse"),e._redraw(),e._updateStreamingPlaylist(j,k,void 0,f),e.streaming.loading().then(function(){var a=e.streaming.getPlayer();a&&a.bind("playlistComplete",c)})),f.listFiles(j,k).then(function(a){e.__updateChapters(b,a),e._redraw()})},onFileTypeChange:function(a,b){b.state.isExpandable="MP3"===$(this).val(),this._super(a,b)},_buildFileList:function(a){var b=this,c=a.state.activeLanguage.code,d=a.state.activeFileType.name,e=this.resource.listFiles(c,d);return a.state.streamable=!1,e=e.then(function(c){return _.each(c,function(a){a.active=!1,a.chapters=[],a.archives=[]}),a.state.books=c,b._redraw()})},_buildStateContext:function(){var a=this._super();return a.activeBookNum=null,a.books=[],a},__getBookResource:function(a){var b=this.resource.sourceURL,d="booknum="+parseInt(a,10);return b.indexOf("booknum")?b=b.replace(/booknum=[\d]+/,d):b+="&"+d,new c(b)},__updateChapters:function(a,c){var d=_.find(c,function(a){return a.mimetype===b.getSetting("ARCHIVE_MIMETYPE")});c=_.filter(c,function(a){return a.mimetype!==b.getSetting("ARCHIVE_MIMETYPE")}),_.each(c,function(a,b){a.index=b}),_.each(a.state.books,function(b){b.booknum===a.state.activeBookNum?(b.chapters=c,b.active=!0,b.archives=[d]):(b.chapters=[],b.active=!1,b.archives=[])})}}),module.define("BibleModal",a)}(),function(){"use strict";var a,b=module.require("DownloadModal");a=b.extend({TEMPLATE_NAME:"TourBrochureModal",MODAL_CONFIG:{},_buildStateContext:function(){return{pubName:this.title||this.resource.getPubName(),files:this.__listFiles()}},__listFiles:function(){var a=this,b=this.resource.listLanguages();return b=b.then(function(b){return _.map(b,function(b){return a.resource.listFileTypes(b.index).then(function(c){return _.map(c,function(c){return a.resource.listFiles(b.index,c.name)})})})}),a._resolveDeferrends(b).then(function(a){return _.flatten(a)})}}),module.define("TourBrochureModal",a)}(),function(){"use strict";var a,b=module.require("settings"),c=module.require("DownloadModal");a=c.extend({TEMPLATE_NAME:"VideoModal",init:function(a){this._super(a),this.autoPlay=!1,this.coverDocURL="",this.title=void 0},onLanguageChange:function(a,b){var c=$(this).val(),d=b.controller.resource.hasSubtitles(c);b.state.activeLanguage=_.extend({},_.find(b.state.languages,function(a){return a.code===c})),d.then(function(a){b.state.showSubtitleSelector=!1,a===b.controller.resource.SUBTITLES_ONLY?b.state.subtitled=!0:a===b.controller.resource.SUBTITLES_NONE?b.state.subtitled=!1:b.state.showSubtitleSelector=!0,b.controller._buildFileList(b)})},onSubtitledChange:function(a,b){b.state.subtitled=$(this).prop("checked"),b.controller._buildFileList(b)},setAutoPlay:function(a){this.autoPlay=a===!0},setCoverDocURL:function(a){this.coverDocURL=a},setTitle:function(a){return this.title=a,this.title},_buildFileList:function(a){var c=this,d=a.state.activeLanguage.code,e=this.resource.listFileTypes(d);return e=e.then(function(b){var e=_.first(b);return a.state.fileType=e,c.resource.listFiles(d,e.name)}).then(function(e){var f=0,g=0;return e=_.filter(e,function(c){return c.subtitled===a.state.subtitled&&-1!==b.getSetting("VIDEO_STREAM_MIMETYPES").indexOf(c.mimetype)}),e=_.groupBy(e,"track"),g=Object.keys(e).length,_.map(e,function(a){var e,h=_.first(a);return e=g>1?h.trackImage.url||b.getSetting("VIDEO_THUMBNAIL"):null,{index:f++,name:h.title,thumbnail:e,resolutions:a,language:c.resource.getLanguage(d)}})}).then(function(a){return c._resolveDeferrends(a)}).then(function(b){a.state.tracks=b,c._redraw(),c._updateStreamingPlaylist(d,a.state.fileType.name,a.state.subtitled)})},_buildStateContext:function(){var a=this._super();return _.extend(a,{autoPlay:this.autoPlay,coverDocURL:this.coverDocURL,pubName:this.title||this.resource.getPubName(),showLanguageSelector:this.resource.listLanguages().then(function(a){return a.length>1}),showSubtitleSelector:!1,showLangSeparator:$.when(a.primaryLanguages,a.otherLanguages).then(function(a,b){return a.length>0&&b.length>0}),subtitleControlID:this.id+"_SubtitleControl",subtitled:!1})},_onFirstRender:function(){this.html.find(".selectSpokenLanguage select").change()}}),module.define("VideoModal",a)}(),function(){"use strict";var a,b=module.require("MediaModal"),c=module.require("PubMediaResource");a=b.extend({TEMPLATE_NAME:"VideoBibleModal",init:function(a,b){this._super(),this.baseURL=b,this.books=_.map(a,function(a,b){return{active:!1,booknum:parseInt(b,10),title:a,chapters:[]}})},onAccordionSelect:function(a,b){var c,d=$(this),e=d.closest("h2"),f=d.data("booknum");return e.hasClass("viewHdgExpand")?b.controller.__closeAllBooks(b):(c=b.controller.__loadBook(b,f),void c.then(function(){e.removeClass("viewHdgCollapse").addClass("viewHdgExpand"),b.controller._redraw()}))},onBookSelect:function(a,b){var c=$(this),d=c.val(),e=b.controller.html.find(".book h2[data-booknum="+d+"]");e.click()},onChapterJump:function(a,b){if(b.controller.streaming||b.controller.streaming.getPlayer()){var c=b.controller.streaming.getPlayer();c.skipTo(b.state.activeTrack)}},_buildStateContext:function(){return{language:{},fileType:{},activeBook:{},activeTrack:0,pubName:"",parentPubName:"",books:this.books}},__closeAllBooks:function(a){_.each(a.state.books,function(a){a.active=!1}),a.controller.html.find(".jsExpandCollapse").removeClass("viewHdgExpand").addClass("viewHdgCollapse")},__fillChapterList:function(a,b,c){var d;b=parseInt(b,10),this.__closeAllBooks(a),d=_.find(a.state.books,function(a){return a.booknum===b}),d.chapters=c,d.active=!0,a.state.activeBook=$.extend({},d),a.state.activeTrack=0},__groupFiles:function(a){var b=0;return a=_.groupBy(a,"track"),_.map(a,function(a){var c=_.first(a);return{index:b++,track:c.track,name:c.title,resolutions:a}})},__loadBook:function(a,b){var c,d,e,f,g=this;return c=this.__loadBookResource(b),c.getPubName().then(function(b){a.state.pubName=b}),c.getParentPubName().then(function(b){a.state.parentPubName=b}),d=c.listLanguages(),d=d.then(function(b){return e=_.first(b),a.state.language=e,c.listFileTypes(e.code)}),d=d.then(function(b){return f=_.first(b),a.state.fileType=f,c.listFiles(e.code,f.name)}),d=d.then(function(a){return _.filter(a,function(a){return a.track>0})}),d=d.then(this.__groupFiles),d=d.then(function(c){g.__fillChapterList(a,b,c)}),d=d.then(function(){g._updateStreamingPlaylist(e.code,f.name,"",c),g.streaming.loading().then(function(){var b=g.streaming.getPlayer();b&&b.bind("playlistComplete",function(){return g.__nextBook(a)})})})},__loadBookResource:function(a){var b=this.baseURL,d="booknum="+parseInt(a,10);return-1!==b.indexOf("booknum")?b=b.replace(/booknum=[\d]+/,d):b+="&"+d,new c(b)},__nextBook:function(a){var b,c;b=_.find(a.state.books,function(a){return a.active}),c=a.state.books.indexOf(b)+1,a.state.books[c]&&this.__loadBook(a,a.state.books[c].booknum)},_draw:function(){var a=this;return this._super().done(function(){a.html.find(".book:first h2:first").click()})}}),module.define("VideoBibleModal",a)}(),function(){"use strict";var a,b,c=module.require("SimpleModal"),d=module.require("UIController"),e="drag",f="pinch",g=200;b=d.extend({TEMPLATE_NAME:"ImageModal",container:null,image:null,wrap:null,imageOrigin:null,lastDragX:null,lastDragY:null,pinchStartingDistance:null,pinchStartingScale:null,scale:1,minScale:1,panX:0,panY:0,lastX:0,lastY:0,translateX:0,translateY:0,originX:0,originY:0,init:function(a){this.src=a},open:function(){this._draw()},_injectHTML:function(a){var b,d=this;this._super(a),this.container=a.find(".fullScreenModalContent"),this.wrap=a.find(".jsImageWrap"),this.image=a.find(".jsImageWrap img"),this.zoomInButton=a.find(".jsZoomIn"),this.zoomOutButton=a.find(".jsZoomOut"),b=new c(a,!0),b.open(),this.image.load(function(){d.imageOrigin={top:0,left:d.image.offset().left},d.__attachEventHandlers(),d.__centerImage()}),this.image.error(function(){c.close()}),this.image.attr("src",this.src)},__applyTransform:function(a,b,c){var d="scale(%s) translate(%spx, %spx)";b=Math.round(b),c=Math.round(c),d=d.format(a,b,c),this.wrap.css({"-webkit-transform":d,"-moz-transform":d,transform:d})},__applyTransformOrigin:function(a,b){var c="%spx %spx";a=Math.round(a),b=Math.round(b),c=c.format(a,b),this.wrap.css({"-webkit-transform-origin":c,"-moz-transform-origin":c,"transform-origin":c})},__attachEventHandlers:function(){var a=$(document),b=this.image.hammer(),c=$.proxy(this.__handleDrag,this),d=$.proxy(this.__handleDragStart,this),e=$.proxy(this.__handlePinch,this),f=$.proxy(this.__handleTouchStart,this),g=$.proxy(this.__handleZoomIn,this),h=$.proxy(this.__handleZoomOut,this);b.on("touchstart",f),b.on("dragstart",d),b.on("drag",c),b.on("doubletap",g),this.zoomInButton.click(g),this.zoomOutButton.click(h),b.on("pinch",e),a.on("keypress",null,"+",g),a.on("keypress",null,"-",h)},__centerImage:function(){var a,b,c,d,e,f=this.image.width()*this.scale,g=this.image.height()*this.scale,h=this.container.width(),i=this.container.height()-this.container.find(".toolbar").height();a=h/f,b=i/g,c=Math.min(a,b),this.minScale=c,this.__zoom(c),f=this.image.width()*this.scale,g=this.image.height()*this.scale,d=(h-f)/2,e=(i-g)/2,this.__pan(d,e)},__getNominalSize:function(){var a=(this.image.width()+this.image.height())/2;return a},__handleDrag:function(b){if(b.preventDefault(),b.gesture&&(!a||a===e)){var c=b.gesture.deltaX-this.lastDragX,d=b.gesture.deltaY-this.lastDragY;this.lastDragX=b.gesture.deltaX,this.lastDragY=b.gesture.deltaY,this.__pan(c,d),a=e,setTimeout(function(){a=null},g)}},__handleDragStart:function(){this.lastDragX=0,this.lastDragY=0},__handlePinch:function(b){var c,d,e,h,i,j=b.gesture.touches,k=b.gesture.center.pageX-this.imageOrigin.left,l=b.gesture.center.pageY-this.imageOrigin.top,m=this.__getNominalSize();if(2===j.length&&(!a||a===f)){if(c=Math.abs(j[0].pageX-j[1].pageX)*this.scale,d=Math.abs(j[0].pageY-j[1].pageY)*this.scale,c=Math.pow(c,2),d=Math.pow(d,2),e=Math.sqrt(c+d),void 0===this.pinchStartingDistance)return void(this.pinchStartingDistance=e);h=e-this.pinchStartingDistance,i=(m+h)/m,i+=this.pinchStartingScale-1,this.__zoom(i,k,l),a=f,setTimeout(function(){a=null},g)}},__handleTouchStart:function(a){a.preventDefault(),this.pinchStartingDistance=void 0,this.pinchStartingScale=this.scale},__handleZoomIn:function(a){a.preventDefault();var b,c,d=this.scale+.5*this.scale;a.gesture?(b=a.gesture.center.pageX-this.imageOrigin.left,c=a.gesture.center.pageY-this.imageOrigin.top):(b=this.container.width()/2,c=this.container.height()/2),this.__zoomTo(d,b,c)},__handleZoomOut:function(a){var b=this.scale-.5*this.scale,c=this.container.width()/2,d=this.container.height()/2;a.preventDefault(),this.__zoomTo(b,c,d)},__pan:function(a,b){a/=this.scale,b/=this.scale,this.panX+=a,this.panY+=b,this.__zoom(this.scale,this.panX,this.panY)},__zoom:function(a,b,c){b=b||this.lastX,c=c||this.lastY,this.originX=this.originX+(b-this.lastX)/this.scale,this.originY=this.originY+(c-this.lastY)/this.scale,a=Math.max(this.minScale,a),this.scale=a,this.translateX=(b-this.originX)/this.scale+this.panX,this.translateY=(c-this.originY)/this.scale+this.panY,this.lastX=b,this.lastY=c,this.__applyTransform(this.scale,this.translateX,this.translateY),this.__applyTransformOrigin(this.originX,this.originY)},__zoomTo:function(a,b,c){var d,e=10,f=1/e,g=this.scale,h=a-g,i=0,j=this;(d=function(){i++;var a=h*$.easing.swing(f*i);j.__zoom(a+g,b,c),e>i&&setTimeout(d,10)})()}}),module.define("ImageModal",b)}(),function(){"use strict";var a,b=400,c=300,d=.375,e=module.require("settings");a=function(a,b,c){this.verseRanges=a,this.bibleSymbol=b?b.toUpperCase():"",this.isXRef=!!c},a.prototype={elem:null,isOpen:!1,loading:null,close:function(){this.elem.dialog("close"),this.isOpen=!1},getTitle:function(){return _t(this.isXRef?"CMSPUBS.HdgMarginalReferences":"CMSPUBS.HdgCitedScripture")},getAPI:function(){var a="BIBLE_HTML_API_"+this.bibleSymbol,b=e.getPageConfig(a);return b?b:e.getPageConfig("BIBLE_HTML_API")},load:function(){var a=this.getAPI()+this.verseRanges,b=this;return this.loading?this.loading:(this.loading=$.getJSONCached(a).then(function(a){var c,d,e,f,g,h;
b.elem=$("<div></div>");for(g in a.ranges)a.ranges.hasOwnProperty(g)&&(c=$("<h2></h2>"),d=$("<a></a>"),e=a.ranges[g],d.html(e.citation),d.attr("href",e.link),c.append(d),h=$(e.html),h.find("sup.verseNum a, span.chapterNum a").contents().unwrap(),f=$("<div></div>"),f.attr("id",g),f.append(c),f.append(h),b.elem.append(f));return b}),this.loading)},open:function(){var a=e.getSetting("IS_MOBILE_LAYOUT"),f=a?c:b,g=f*d,h=.9*$(window).height(),i=.9*$(window).width(),j=$("<div><div class='loading'></div></div>"),k=$("#article"),l=k.attr("lang"),m=k.attr("dir"),n=this;j.addClass("lang-"+l),j.addClass("dir-"+m),j.attr("lang",l),j.attr("xml:lang",l),j.attr("dir",l),j.dialog({dialogClass:"scriptureDialog",title:this.getTitle(),maxHeight:h,maxWidth:i,width:f,minHeight:g,modal:a,close:function(){n.isOpen=!1},closeText:_t("CMSPUBS.LnkCloseUppCase"),position:{my:"center",at:"center",of:window}}),$(document).on("click",".ui-widget-overlay",function(){n.close()}),this.load().done(function(a){j.empty().append(a.elem)}),this.isOpen=!0}},module.define("ScriptureDialog",a)}(),function(){"use strict";var a,b,c,d=module.require("settings"),e=module.require("browser"),f=18,g=13,h=27,i=37,j=38,k=39,l=40,m=4,n="AutocompleteFeatured";c=function(){this.index=0,this.value="",this.label="",this.altLabel="",this.altSpellings="",this.elemOption=null,this.icon=null},b=function(){this.values=[],this.labels=[],this.altLabels=[],this.altSpellings=[],this.optionElems=[],this.icons=[]},b.prototype={exists:function(a){return void 0!==this.values[a]},get:function(a){if(void 0===this.values[a])return void 0;var b=new c;return b.index=a,b.value=this.values[a],b.label=this.labels[a],b.altLabel=this.altLabels[a],b.altSpellings=this.altSpellings[a],b.elemOption=this.optionElems[a],b.icon=this.icons[a],b},indexOf:function(a){return this.values.indexOf(a)},list:function(a){var b,c,d=[];for(b=0;b<this.values.length;b++)d.push(this.get(b));return void 0===a?d:(c=this.__getSearchIndex(),a=a.toLowerCase(),d=$.grep(d,function(b,d){return-1!==c[d].indexOf(a)}))},loadData:function(a){var b=this;a.children("option").each(function(){var a=$(this);b.__addOption(a)}),this.__optionHTMLCache={}},__addOption:function(a){var b=a.attr("value"),c=a.text(),d=a.data("alternative-label"),e=a.data("alternative-spellings"),f=a.data("icon");this.values.push(b),this.labels.push(c),this.altLabels.push(d),this.altSpellings.push(e),this.optionElems.push(a),this.icons.push(f)},__getSearchIndex:function(){if(this.searchIndex)return this.searchIndex;var a,b,c=/<(?:.|\n)*?>/gm;for(this.searchIndex=[],b=0;b<this.values.length;b++)a=this.values[b],a+=this.labels[b],a+=this.altLabels[b],a+=this.altSpellings[b],a=a.toLowerCase().replace(c,""),this.searchIndex.push(a);return this.searchIndex}},a=function(a,b){var c,d=$("<div></div>");c={activeClass:"active",columnWidth:235,minColumns:1,maxColumns:4,showFeatured:!1},this.__dimensionCache={},this.__optionHTMLCache={},this.elemSelect=a,this.settings=$.extend(c,b),this.selector={container:$("body"),elem:null,customStyle:!1,isOpen:!1,isClosable:!0},this.loadOptions(),this.elemInput=this.__renderTextField(),this.elemSelect.hide(),d.addClass("jsAutoCompleteInputWrapper"),d.append(this.elemInput),d.insertAfter(this.elemSelect),this.__bindInputEventHandlers()},a.prototype={close:function(){this.__handleBlur(this.selector.elem)},configureSelector:function(a,b,c){this.selector.container=a||$("body"),this.selector.customStyle=!!b,this.selector.isClosable=!!c},loadOptions:function(){var a,c;this.options=new b,this.options.loadData(this.elemSelect),a=this.options.indexOf(this.elemSelect.val()),a=-1===a?null:a,this.selectedIndex=a,null!==a&&(c=this.options.get(a),this.__addFeaturedOption(c.value),this.elemInput&&this.elemInput.val(c.label)),this.selector.elem&&this.selector.isOpen&&this.__drawSelector()},open:function(){if(!this.selector.isOpen){var a=this.options.indexOf(this.elemSelect.val()),b=this.options.get(a);this.elemInput.val(""),this.elemInput.removeClass(b.elemOption.data("input-icon-class")),this.__drawSelector(),this.selector.isOpen=!0}},selectOption:function(a){var b,c,d,e,f;return this.options.exists(a)?(b=this.options.get(a),c=this.elemSelect.val(),d=this.options.indexOf(c),e=this.options.get(d),f=e.elemOption.data("input-icon-class"),this.elemInput.removeClass(f),this.elemInput.addClass(b.elemOption.data("input-icon-class")),this.selectedIndex=a,this.elemInput.val(b.label),this.elemSelect.children().prop("selected",!1),this.elemSelect.children('[value="'+b.value+'"]').prop("selected",!0),this.__addFeaturedOption(b.value),c!==b.value&&this.elemSelect.trigger("change"),void this.elemSelect.trigger("autocomplete-option-selected")):(this.elemInput.val(""),void this.__drawSelector())},__attachSelector:function(a){var b,c=this;this.selector.customStyle||(b=$(window).scrollTop()),this.selector.container.append(a),this.selector.customStyle||(this.__positionSelector(a),$(window).resize(function(){c.__positionSelector(a)}),$(window).scrollTop(b))},__bindInputEventHandlers:function(){var a,b,c,d,f,g=this;this.elemInput.on("focus",this.open.bind(this)),a=function(a){b!==a&&(g.__drawSelector(a),b=a)},c=e.isIE()?"keydown":"input keydown",d=e.isIE()?"keyup":"input keyup",this.elemInput.on(c,function(a){g.__handleControlKey(g.selector.elem,a.keyCode)&&a.preventDefault()}),this.elemInput.on(d,function(){var b=g.elemInput.val();f&&clearTimeout(f),f=setTimeout(function(){a(b)},0)})},__bindSelectorRemove:function(a){var b,c=this,d=!0,e=!1;b=function(){d||e||c.__handleBlur(a)},a.on("mouseenter",function(){e=!0}),a.on("mouseleave",function(){e=!1,setTimeout(b,200)}),this.elemInput.on("focus",function(){d=!0}),this.elemInput.on("blur",function(){d=!1,setTimeout(b,200)})},__addFeaturedOption:function(a){if(this.settings.showFeatured){var b=this.__getFeaturedKey(),c=this.__listFeaturedOptions(),e=c.indexOf(a);-1!==e&&c.splice(e,1),c.unshift(a),c=c.slice(0,2*m),d.setPageConfig(b,c)}},__copyAttrs:function(a,b,c){var d,e;for(d=0;d<c.length;d++)e=a.attr(c[d]),b.attr(c[d],e);return b},__drawSelector:function(a){this.selector.elem&&this.selector.elem.remove(),this.selector.elem=this.__renderSelector(a),this.__attachSelector(this.selector.elem),this.__bindSelectorRemove(this.selector.elem)},__getFeaturedKey:function(){var a=this.elemSelect,b=a.data("featured-items-name")||a.attr("id")||a.attr("name");return"%s-%s".format(n,b)},__getNumColumns:function(){var a=$(window),b=a.width()-this.__getSelectorLeft(),c=Math.floor(b/this.settings.columnWidth);return c=Math.min(this.settings.maxColumns,c),c=Math.max(this.settings.minColumns,c)},__getSelectorLeft:function(a){var b,c,d=$(window),e=this.elemInput.offset(),f=e.left+this.elemInput.outerWidth()/2,g=d.width()/2;return b=a?a.outerWidth():this.settings.maxColumns*this.settings.columnWidth,c=g>f?e.left:e.left+this.elemInput.outerWidth()-b,Math.max(0,c)},__getSelectorTop:function(){if(this.__dimensionCache.selectorTop)return this.__dimensionCache.selectorTop;var a=this.elemInput.offset(),b=a.top+this.elemInput.outerHeight();return this.__dimensionCache.selectorTop=Math.max(0,b),this.__dimensionCache.selectorTop},__handleBlur:function(a){var b=this.elemInput.val();this.selector.isClosable&&(this.selector.isOpen=!1,-1===this.options.indexOf(b)&&this.selectOption(this.selectedIndex),a.fadeOut(function(){a.remove()}),this.__dimensionCache={},this.elemInput.next("input").focus())},__handleControlKey:function(a,b){var c,d,e,f,m,n=a.find("li."+this.settings.activeClass),o=!1;return b===h?(this.elemInput.blur(),!0):b===g?(e=n.data("index"),this.selectOption(e),this.elemInput.blur(),!0):((b===j||b===l)&&(d=b===j?"prev":"next",c=n[d](),o=!0),(b===i||b===k)&&(d=b===i?"prev":"next",e=n.parent().children().index(n),c=n.parent().parent()[d]().children().children().filter(":eq("+e+")"),o=!0),c&&c.length>0?(n.removeClass(this.settings.activeClass),c.addClass(this.settings.activeClass),e=c.parent().children().index(c),f=c.parent().height()-a.innerHeight(),m=$.easing.swing(e/c.parent().children().length)*f,a.scrollTop(m),!0):o)},__handleOptionClick:function(a){var b=a.data("value").toString();this.selectOption(this.options.indexOf(b))},__listFeaturedOptions:function(){if(!this.settings.showFeatured)return[];var a=this.__getFeaturedKey(),b=d.getPageConfig(a)||[];return b},__positionSelector:function(a){var b=this.__getSelectorTop(),c=this.__getSelectorLeft(a);a.offset({top:b,left:c})},__renderOptionHTML:function(a){if(void 0!==this.__optionHTMLCache[a.value])return this.__optionHTMLCache[a.value];var b=$("<li></li>"),c=["class","lang","dir","xml:lang"];return b=this.__copyAttrs(a.elemOption,b,c),a.icon&&b.append(a.icon),b.append(a.label),a.altLabel&&b.append("<span class='altLabel'>"+a.altLabel+"</span>"),b.attr("data-index",a.index),b.attr("data-value",a.value),a.index===this.selectedIndex&&b.addClass(this.settings.activeClass),this.__optionHTMLCache[a.value]=b,b},__renderSelector:function(a){var b=this.options.list(a),c=this.__renderSelectorHTML(b),d=this;return c.find("li").on("click",function(){d.__handleOptionClick($(this)),d.__handleBlur(c)}),c},__renderSelectorHTML:function(a){var b,c,d,e,g,h=this,i=$('<div><div class="inner"></div></div>'),j=i.children(".inner"),k=$("<div><ul></ul></div>"),l=this.__listFeaturedOptions(),n=Math.min(a.length,this.__getNumColumns()),o=this.__renderOptionHTML.bind(this);return k.addClass("jsAutoCompleteColumn featuredOptions"),g=_.intersection(l,_.pluck(a,"value")),b=m-m%n,g=g.slice(0,b),e=Math.ceil(a.length/n),e+=Math.floor(e/3/n),g=_.filter(a,function(b){return g.length<a.length&&-1!==g.indexOf(b.value)}),g=_.sortBy(g,function(a){return l.indexOf(a.value)}),c=function(a,b){return Math.floor(b/e)},d=function(a){var b=$("<div><ul></ul></div>");return b.css("width",h.settings.columnWidth),b.addClass("jsAutoCompleteColumn"),b.children("ul").append(a),b},k.children("ul").append(_.invoke(_.map(g,o),"clone")),k.find("li").length>0&&j.append(k),j.append(_.chain(a).map(o).groupBy(c).map(d).value()),0===i.find("li."+this.settings.activeClass).length&&i.find("li:first").addClass(this.settings.activeClass),i.addClass("jsAutoCompleteSelector"),i.addClass(this.elemInput.data("autocompleteclass")),this.selector.customStyle||i.css("width",n*this.settings.columnWidth+f),i},__renderTextField:function(){var a=$("<input />"),b=this.options.get(this.selectedIndex);return this.__copyAttrs(this.elemSelect,a,["class","placeholder","data-autocompleteclass"]),a.addClass("jsAutoCompleteInput"),a.addClass(this.elemSelect.data("autocompleteclass")),a.addClass(b.elemOption.data("input-icon-class")),a.val(b?b.label:""),a}},module.define("Autocomplete",a),module.define("autocomplete",{Autocomplete:a,OptionRecord:c,OptionSet:b,init:function(b,c){var d;!b.data("autocomplete")&&b.children("option").length>0&&(d=new a(b,c),b.data("autocomplete",d))}})}(),function(){"use strict";var a,b=.6211,c=module.require("url");a=Class.extend({init:function(){var a=this.onAnchorClick.bind(this);$(document).on("click","a:not(.jsNoScroll)[href*=#]",a),this.targetResolvers=[],this.addTargetResolver(function(a){return $("#"+a)})},addTargetResolver:function(a){var b=this;this.targetResolvers.unshift(a),$(document).ready(function(a){b.__scrollTimer&&clearTimeout(b.__scrollTimer),b.__scrollTimer=setTimeout(function(){b.onAnchorClick(a)},1e3)})},getHash:function(a){return a=a||window.location.href,a=c.parse(a),window.location.pathname!==a.path&&a.path?void 0:a.hash.path},onAnchorClick:function(a){var b,c,d,e,f,g=$(a.target);if(g=g.is("a")?g:g.closest("a"),b=g.exists()?g.attr("href"):void 0,c=this.getHash(b)){for(a.preventDefault&&a.preventDefault(),d=0;d<this.targetResolvers.length&&(f=this.targetResolvers[d],!(e=f(c)));d++);e&&e.exists()&&(window.location.hash=c,this.scrollTo(e))}},scrollTo:function(a){var c=$(document).height(),d=$(window).height(),e=a.offset().top-d*(1-b),f=c-d,g=Math.min(e,f);$(window).scrollTop(g)}}),module.define("AnchorLinkController",a),module.get("AnchorLinkController")}(),function(){"use strict";var a,b=module.require("settings"),c=module.require("UIController"),d=module.require("SimpleModal"),e=module.require("autocomplete");a=c.extend({TEMPLATE_NAME:"LanguagePicker",forceOnlySL:!1,open:function(a){this.injector=a,this._draw()},onLanguageFilterClick:function(a,b){var c,d=this;b.controller.__updating||(c=function(a){b.state.optionHTML=b.controller.__renderOptionHTML(a),b.controller.autocomplete&&b.controller.autocomplete.loadOptions(),b.controller.__updating=!1},b.controller.__updating=!0,setTimeout(function(){var a=!!d.checked;b.controller.__listLanguages(a).then(c)},0))},_buildStateContext:function(){var a=this.forceOnlySL;return{onlySL:a,optionHTML:this.__listLanguages(a).then(this.__renderOptionHTML.bind(this)),numLanguages:this.__listLanguages(!1).then(function(a){return a.length})}},_injectHTML:function(a){var b;return this._super(a),this.container=a.find(".fullScreenModalContent"),this.injector?this.injector(a):(b=new d(a,!0),b.updateSettings({afterShow:function(){a.find("input.jsAutoCompleteInput").focus()}}),void b.open())},_onFirstRender:function(){var a=this.container.find("select:first");e.init(a,{showFeatured:!0}),this.autocomplete=a.data("autocomplete"),this.autocomplete.configureSelector(this.container,!0,!1),this.autocomplete.open(),a.on("autocomplete-option-selected",function(){$(this).closest("form").submit()})},_renderTemplate:function(a){var b=$("#templates .template.languagePicker").children().clone();return rivets.bind(b,a),this.__formalityPromise(b)},__buildLanguageContext:function(a){var c=b.getPageConfig("CONTENT_LANG"),d=b.getPageConfig("CONTENT_LANG_DIRECTION");return a.name=a.name||"",a.vernacularName=a.vernacularName||"",a.altLabel="<span class='lang-%s' lang='%s' xml:lang='%s' dir='%s'>%s</span>".format(c,c,c,d,a.name),a.className="dir-%s lang-%s".format(a.direction,a.symbol),a.className+=a.isSignLanguage?" signLanguage":a.hasWebContent?" hasWebContent":" downloadOnly",a},__listLanguages:function(a){var c,d=this,e=b.getPageConfig("LANGUAGE_API");return this.__cacheLanguageList?c=this.__formalityPromise(this.__cacheLanguageList):(c=$.getJSONCached(e),c=c.then(function(a){var b=_.map(a.languages,d.__buildLanguageContext);return d.__cacheLanguageList=b,b})),c.then(function(b){return a?_.filter(b,function(a){return a.isSignLanguage}):b})},__renderOptionHTML:function(a){var c=b.getPageConfig("CONTENT_LANG");return a=this.__sortLanguages(a),_.reduce(a,function(a,b){var d="<option ";return d+="data-icon=\"<span class='icon'></span>\" ",d+='data-alternative-spellings="'+b.altSpellings+'" ',d+='class="'+b.className+'" ',d+='value="'+b.symbol+'" ',d+='lang="'+b.symbol+'" ',d+='dir="'+b.direction+'" ',d+='xml:lang="'+b.symbol+'" ',b.symbol===c&&(d+='selected="selected" '),d+='data-alternative-label="'+b.altLabel+'">',d+=b.vernacularName,d+="</option>",a+=d},"")},__sortLanguages:function(a){var b,c,d;return String.prototype.localeCompare?(c={usage:"sort",sensitivity:"base",ignorePunctuation:!0},window.Intl&&window.Intl.Collator?(b=new window.Intl.Collator(void 0,c),a.sort(function(a,c){return b.compare(a.vernacularName,c.vernacularName)})):(d=new RegExp(/^\w*/),a.sort(function(a,b){var e=d.exec(a.vernacularName)[0],f=d.exec(b.vernacularName)[0],g=Math.min(e.length,f.length);return e.substr(0,g).toLowerCase()!==f.substr(0,g).toLowerCase()?e.toLowerCase()<f.toLowerCase()?-1:1:a.vernacularName.localeCompare(b.vernacularName,void 0,c)}))):_.sortBy(a,"vernacularName")}}),module.define("LanguagePicker",a)}(),function(){"use strict";var a={aspectRatio:1.3,defaultColorScheme:"jw",colorSchemes:{kr:["#511a49","#855f80","#ad94aa"],jw:["#2d446b","#4a6da7","#829ecb"]}};module.define("Chart.Settings",a)}(),function(a){"use strict";var b,c=module.require("Chart.Settings");b=Class.extend({DEFAULT_OPTIONS:{animation:!1,responsive:!0,showTooltips:!0,legend:!0,legendBorders:!1,legendSpaceBeforeText:20,legendSpaceBetweenTextHorizontal:20,barValueSpacing:1,barDatasetSpacing:1,graphTitleFontFamily:"'Helvetica Light', Helvetica, 'Droid Sans', Arial, Arial Unicode MS, sans-serif",graphTitleFontSize:17,graphTitleFontColor:"#65605e",graphTitleFontStyle:"200",graphTitleTextAlign:"left",graphTitleSpaceBefore:0,graphTitleSpaceAfter:0,graphSpaceAfter:0,legendBordersSpaceAfter:0,xAxisLabelSpaceAfter:0,footNoteSpaceAfter:0,spaceBottom:0,scaleFontColor:"#8C8C8C",scaleFontSize:13,scaleGridLineColor:"#ECECEA",scaleLineColor:"#ECECEA",scaleFontFamily:"'Helvetica Light', Helvetica, 'Droid Sans', Arial, Arial Unicode MS, sans-serif",xAxisFontColor:"#65605e",xAxisFontSize:14,xAxisFontFamily:"'Helvetica Light', Helvetica, 'Droid Sans', Arial, Arial Unicode MS, sans-serif",yAxisFontColor:"#65605e",yAxisFontSize:14,yAxisFontFamily:"'Helvetica Light', Helvetica, 'Droid Sans', Arial, Arial Unicode MS, sans-serif",legendFontColor:"#65605e",legendFontFamily:"'Helvetica Light', Helvetica, 'Droid Sans', Arial, Arial Unicode MS, sans-serif",maxLabelWidth:125},COLOR_SCHEMES:c.colorSchemes,DEFAULT_COLOR_SCHEME:c.defaultColorScheme,init:function(a,b){this.elem=a,this.options=b},destroy:function(){this.elem.empty()},_createCanvas:function(){return $("<canvas/>")},create:function(){var b;this.$canvas=this._createCanvas(),this.elem.append(this.$canvas),b=this.$canvas.get(0),b.height=b.width/this.getAspectRatio(),this.ctx=b.getContext("2d"),this.chart=new a(this.ctx)[this.chartType](this.getData(),this.buildOptions())},getAspectRatio:function(){return c.aspectRatio?c.aspectRatio:2},getColor:function(a){var b=this.options.data.length,c=this.getColorScheme().slice(0,b);return c[a%c.length]},getColorScheme:function(){var a=this.DEFAULT_COLOR_SCHEME,b=this.options.style;return b&&b.colorScheme&&this.COLOR_SCHEMES[b.colorScheme]&&(a=b.colorScheme),this.COLOR_SCHEMES[a]},getDomainLabels:function(){var a,b,c,d,e,f,g,h;if(this.labels)return this.labels;if(a=this.options.domain||{},b=this.options.data[0].values.length,c=$.extend(!0,{},this.options,this.DEFAULT_OPTIONS),a.labels)return this.labels=this.isHorizontal()?a.labels.map(this._getWrapLabelFunction(c),this):a.labels,this.isRTL()&&this.labels.reverse(),this.labels;if(!_.has(a,"min")||!_.has(a,"max"))return[];if(!a.visibleTicks&&_.has(a,"ticks")&&(a.visibleTicks=a.ticks),e=a.ticks||b,d=Math.floor((a.max-a.min)/(e-1)),this.labels=_.range(a.min,a.max+1,d),a.visibleTicks){for(f=Math.ceil(e/a.visibleTicks),g=[],h=0;e>h;h++)g[h]=h%f===0?this.labels[h]:"";this.labels=g}return this.isRTL()&&this.labels.reverse(),this.labels},buildOptions:function(a){var b,c,d;return b=$.extend(!0,{},this.DEFAULT_OPTIONS,a),this.buildScale(b),d=this.options.style||{},c=d.layout||"vertical",d.thousandSeparator&&(b.thousandSeparator=d.thousandSeparator),this.options.chartTitle&&(b.graphTitle=this.wrap(this.options.chartTitle,this._getTitleFont(b))),_.has(this.options,"domain")&&_.has(this.options.domain,"title")&&("vertical"===c?b.xAxisLabel=this.options.domain.title:b.yAxisLabel=this.options.domain.title),_.has(this.options,"range")&&(this.options.range.hide&&(b.scaleShowLabels=!1),_.has(this.options.range,"title")&&("vertical"===c?b.yAxisLabel=this.options.range.title:b.xAxisLabel=this.options.range.title)),b.yAxisRight=this.isRTL(),b.yAxisLeft=!this.isRTL(),_.has(this.options,"valueLabels")&&this.options.valueLabels.length&&(b.valueLabels=this.options.valueLabels.map(this._getWrapLabelFunction(b),this),this.isHorizontal()&&b.valueLabels.reverse(),b.inGraphDataTmpl="<%= config.valueLabels[v12] %>",b.inGraphDataShow=!0),b},buildScale:function(a){var b,c=this.options.range;c&&_.isNumber(c.max)&&(a.scaleOverride=!0,_.isNumber(c.ticks)||(c.ticks=this.options.data[0].values.length),_.isNumber(c.min)||(c.min=0),this.isRTL()&&this.isHorizontal()&&(b=c.min,c.min=c.max,c.max=b),a.scaleStartValue=c.min,a.scaleStepWidth=Math.round((c.max-c.min)/(c.ticks-1)),a.scaleSteps=c.ticks-1)},isHorizontal:function(){return!1},isRTL:function(){return this.options?this.options.RTL:!1},wrap:function(a,b,c){var d,e,f,g,h=[],i=0;if(c=c||this.$canvas.width(),d=this._getTextWidth(a,b),d>c){e=a.split(" "),g=e;do f=g,g=this._findLongestSplit(g,b,c),h.push(e.slice(i,e.length-g.length).join(" ")),i+=e.length-g.length-i;while(g.length!==f.length&&i!==e.length);return h.join("\n")||a}return a},_findLongestSplit:function(a,b,c){var d,e;if(0===a.length)return a;for(d=1;d<=a.length;d++)if(e=this._getTextWidth(a.slice(0,d).join(" "),b),e>c)return a.slice(1===d?d:d-1,a.length);return[]},_getTextWidth:function(a,b){var c,d=this.ctx.font;return this.ctx.font=b,c=this.ctx.measureText(a).width,this.ctx.font=d,c},_getTitleFont:function(a){return a.graphTitleFontSize?(a.graphTitleFontStyle?a.graphTitleFontStyle+" ":"200 ")+(a.graphTitleFontSize?"12px ":a.graphTitleFontSize+" px ")+(a.graphTitleFontFamily?a.graphTitleFontFamily:"Arial"):this.ctx.font},_getLabelFont:function(a){return a.xAxisFontSize?(a.xAxisFontStyle?a.xAxisFontStyle+" ":"200 ")+(a.xAxisFontSize?"12px ":a.xAxisFontSize+" px ")+(a.xAxisFontFamily?a.xAxisFontFamily:"Arial"):this.ctx.font},_getWrapLabelFunction:function(a){var b=this;return function(c){return c?b.wrap(c,b._getLabelFont(a),a.maxLabelWidth):c}}}),module.define("ChartBase",b)}(window.Chart),function(a){"use strict";var b,c=module.require("ChartBase");b=c.extend({create:function(){var b,c;c={graphSubTitleSpaceAfter:5,graphTitleSpaceAfter:5},this.$canvas=this._createCanvas(),this.elem.append(this.$canvas),b=this.$canvas.get(0),b.height=b.width/this.getAspectRatio(),this.ctx=b.getContext("2d"),this.chart=this.options.data.length>1?this.isHorizontal()?new a(this.ctx).HorizontalStackedBar(this.getData(),this.buildOptions()):new a(this.ctx).StackedBar(this.getData(),this.buildOptions(c)):this.isHorizontal()?new a(this.ctx).HorizontalBar(this.getData(),this.buildOptions()):new a(this.ctx).Bar(this.getData(),this.buildOptions(c))},getData:function(){if(this.data)return this.data;var a=this;return this.data={},this.options.domain=this.options.domain||{},this.options.domain.ticks=this.options.data[0].values.length,this.data.labels=this.getDomainLabels(),!a.isRTL()&&this.isHorizontal()&&this.data.labels.reverse(),this.data.datasets=this.options.data.map(function(b,c){var d,e,f=_.clone(b.values);for(d=c-1;d>=0;d--)for(e=0;e<f.length;e++)f[e]=f[e]-a.options.data[d].values[e],a.options.data[d+1].values[e]=f[e];return(a.isRTL()||a.isHorizontal())&&f.reverse(),{title:b.label,fillColor:a.getColor(c),data:f}}),this.data},isHorizontal:function(){return this.options&&this.options.style&&"horizontal"===this.options.style.layout}}),module.define("Chart.Bar",b)}(window.Chart),function(){"use strict";var a,b,c=module.require("ChartBase");b={bezierCurve:!1,datasetFill:!1},a=c.extend({init:function(a,b){this._super(a,b),this.chartType="Line"},buildOptions:function(){return this._super(b)},getData:function(){var a,b,c,d,e,f,g;if(this.data)return this.data;if(a=this,this.data={},this.data.labels=this.getDomainLabels(),_.has(this.options,"domain"))_.has(this.options.domain,"min")&&(this.data.xBegin=this.options.domain.min),_.has(this.options.domain,"max")&&(this.data.xEnd=this.options.domain.max);else{if(b=Number.MAX_VALUE,c=Number.MIN_VALUE,d=this.options.data,_.isNaN(parseFloat(this.data.labels[0])))for(e=0;e<d.length;e++)for(f=0;f<d[e].values.length;f++)g=d[e].values[f][0],b=b>g?g:b,c=g>c?g:c;else b=_.min(this.data.labels,parseInt),c=_.max(this.data.labels,parseInt);this.data.xBegin=b,this.data.xEnd=c}return this.data.datasets=this.options.data.map(function(b,c){var d=_.clone(b.values),e=_.pluck(d,0);return a.isRTL()&&(e=_.map(e,function(b){return a.data.xBegin+(a.data.xEnd-b)})),{title:b.label,strokeColor:a.getColor(c),pointColor:a.getColor(c),data:_.pluck(d,1),xPos:e}}),this.data}}),module.define("Chart.Line",a)}(),function(){"use strict";var a,b,c=module.require("ChartBase");b={inGraphDataShow:!0,inGraphDataAnglePosition:2,inGraphDataRadiusPosition:2,inGraphDataAlign:"center",inGraphDataVAlign:"middle",inGraphDataFontColor:"white",inGraphDataTmpl:"<%=v6 + '%'%>"},a=c.extend({init:function(a,b){this._super(a,b),this.chartType="Pie"},buildOptions:function(){return this._super(b)},getData:function(){if(this.data)return this.data;var a=this;return this.options.data=this.options.data||[],this.data=this.options.data.map(function(b,c){return{title:b.label,color:a.getColor(c),value:b.values[0]}}),this.data}}),module.define("Chart.Pie",a)}(),function(){"use strict";var a,b=module.require("Chart.Pie");a=b.extend({init:function(a,b){this._super(a,b),this.chartType="Doughnut"},getData:function(){if(this.data)return this.data;var a=this;return this.options.data=this.options.data||[],this.data=this.options.data.map(function(b,c){return{title:b.label,color:a.getColor(c),value:b.values[0]}}),this.data}}),module.define("Chart.Doughnut",a)}(),function(){"use strict";var a,b,c=module.require("Chart.Line"),d=module.require("Chart.Bar"),e=module.require("Chart.Pie"),f=module.require("Chart.Doughnut");b={series:{"default":c,line:c},bar:{"default":d,stacked:d},proportional:{"default":e,doughnut:f,pie:e}},a=Class.extend({init:function(a,c,d){var e,f;if(_.has(b,a)){if(e=$.extend(!0,{style:{subType:"default"}},d),f=b[a][e.style.subType],_.isUndefined(f))throw new Error("Chart subType ("+e.style.subType+") does not exist");this.chart=new f($("#"+c),e)}},create:function(){this.chart&&this.chart.create&&this.chart.create()}}),module.define("Chart",a)}(),function(){"use strict";$(document).ready(function(){$(".jsPanoElement").removeClass("jsPanoElement"),$("#jsPanoWdgtList").slippry({elements:"li",start:"random",controls:!1,pager:!1,captions:!1,transition:"fade",speed:800,pause:8e3,autoHover:!1})})}(),$(function(){"use strict";var a,b,c=module.require("settings"),d=module.require("signal"),e="PUBS_VIEW_MODE",f="gridView",g="listView",h=$("#pubsViewResults"),i=$(".jsSelectGridView"),j=$(".jsSelectListView"),k=$.persistentData(e);a=function(){$.persistentData(e,f),h.removeClass(g).addClass(f),i.hide(),j.show()},b=function(){$.persistentData(e,g),h.removeClass(f).addClass(g),j.hide(),i.show()},i.on("click",a),j.on("click",b),d.listen("EnableAccessibilityMode",b),k===g||c.getPageConfig("ACCESSIBILITY_MODE")?b():k===f&&a()}),$(function(){"use strict";var a,b=$(".jsAutoSelectLocation");a=function(){var a,b=navigator.userLanguage||navigator.language||navigator.browserLanguage||navigator.systemLanguage,c=b?b.match(/([\w]+)\-([\w]+)/):!1;return!c||c.length<2?"":a=c[2].toUpperCase()}(),b.each(function(){var b,c=$(this).children();c.filter(":selected").val()||(b=c.filter("[data-iso2location!=][data-iso2location~="+a+"]"),b.exists()&&(b.prop("selected",!0),$(this).trigger("change")))})}),function(){"use strict";var a,b,c=500,d="jsToolTipActive",e="closeToolTips",f=module.require("signal");a=function(a,b){var g,h=!1,i=!0,j="click"===a.data("trigger");f.send(e),b.addClass(d),b.find("input:first").focus(),g=function(){h||i||b.removeClass(d)},f.listen(e,g),b.on("mouseenter focusin",function(){h=!0}),a.on("mouseenter focusin",function(){i=!0}),b.on("mouseleave focusout",function(){h=!1,j||setTimeout(g,c)}),a.on("mouseleave focusout",function(){i=!1,j||setTimeout(g,c)}),$(document).on("click",g)},b=function(b){b.preventDefault();var c=$(this),d=c.find("~ .jsToolTip:first");a(c,d)},$(document).on("mouseenter focusin",'.jsToolTipTrigger[data-trigger!="click"]',b),$(document).on("click",'.jsToolTipTrigger[data-trigger="click"]',b)}(),function(){"use strict";var a,b=module.require("signal"),c=module.require("settings");a=function(){var a,b,d,e,f=$(this),g=!1;f.data("viewport-pin")||(f.data("viewport-pin",!0),f.wrap('<div class="jsViewportPinWrapper"></div>'),e=f.parent(),a=function(){var a=c.getSetting("IS_MOBILE_LAYOUT");e.height(e.height()),f.width(a?"":f.width()),a&&f.children(".jsExcludeMobilePin").hide(),f.addClass("pinned"),g=!0},b=function(){f.removeClass("pinned"),g=!1,c.getSetting("IS_MOBILE_LAYOUT")&&f.children(".jsExcludeMobilePin").show(),e.height(""),f.width("")},d=function(){var d=f.children(":not(.error):visible"),h=$(window).scrollTop(),i=e.offset().top,j=i>=h&&g,k=h>i&&!g;c.getSetting("IS_MOBILE_LAYOUT")&&(d=d.filter(":not(.jsExcludeMobilePin)")),j||!d.exists()?b():k&&a()},$(window).on("scroll",d),$(window).on("resize",function(){g&&(b(),a())}))},b.listen("DOMReady",function(){$(".jsViewportPin").each(a)})}(),$(function(){"use strict";var a,b,c,d,e,f,g="jsDisableSavedStates",h=module.require("url"),i=$("body").attr("id")||"",j=$.persistentData(i)||{};c=function(a){a.preventDefault(),$(".jsExpandCollapse").each(function(){var a=$(this),b=a.data("collapseaction");a.hasClass(b)&&$(a).click()})},d=function(a){a.preventDefault(),$(".jsExpandCollapse").each(function(){var a=$(this),b=a.data("expandaction");a.hasClass(b)&&$(a).click()})},e=function(a,b){var c,d=a.nextAll(".jsCollapsableBlock:first"),e=a.data("expandaction"),f=a.data("collapseaction"),h=a.hasClass(f),i=h?f:e,j=h?e:f,k=h?"slideUp":"slideDown",l=$("body").attr("id");b=b||200,d[k](b),a.removeClass(i).addClass(j),l&&!a.hasClass(g)&&(c=$.persistentData(l)||{},c[a.attr("id")]=j,$.persistentData(l,c))},$(document).on("click",".jsExpandAll",d).on("click",".jsCollapseAll",c),$(document).on("click",".jsExpandCollapse",function(a){a.preventDefault(),e($(this))}),f=h.parse().hash.query,f.accordion&&(j=$.extend(j,f.accordion));for(a in j)j.hasOwnProperty(a)&&(b=$("#"+a),b.length>0&&!b.hasClass(g)&&!b.hasClass(j[a])&&e(b,0))}),$(function(){"use strict";var a,b,c,d,e=module.require("ScriptureDialog"),f=module.require("signal");a=function(a){var b,c=a.split("#"),d=$.Deferred();return 2!==c.length?(d.reject(),d):(b=c.pop(),c=c.pop(),$.getCached(c,"html",!0).done(function(c){c=$(c);var e=$("<div></div>"),f=$("<a></a>").attr("href",a);e.addClass("ftnGlossaryTerm"),e.append("<h2>"+_t("CMSPUBS.HdgGlossaryTerm")+"</h2>"),e.append(c.find("#"+b).contents()),e.find("h3").has(".dt").wrapInner(f),e.find('a[target="_blank"]').removeAttr("target"),d.resolve(e)}),d)},b=function(){var a=$(this),b=a.data("targetverses"),c=new e(b,a.data("bible"),a.hasClass("xrefLink")),d=a.children(":first").is("strong")||a.parent().hasClass("themeScrp");d&&c.load(),a.on("mouseover",function(){c.load()}),a.on("click",function(a){a.preventDefault(),c.isOpen||c.open()})},c=function(){var b=$(this),c=b.attr("href").replace(/.*#/,""),d=$("#"+c),e=$("<div></div>");e.append(d.clone()),e.attr("title",_t("CMSPUBS.HdgFootnote")),e.find('a[href*="footnotesource"]').hide(),e.addClass("footnoteList"),e.find(".jsGlossaryLink").each(function(){var b=$(this),c=b.attr("href");a(c).done(function(a){e.append(a),b.replaceWith(b.contents())})}),b.on("click",function(a){a.preventDefault(),e.dialog()})},d=function(){var a=$("body.dc115 .jsBibleLink, body.BibleReadingPage #bibleChOutlineContainer .jsBibleLink");a.each(function(){$(this).removeAttr("target")}),$(".jsBibleLink").not(a).each(b),$(".groupFootnote").prepend("<h3>"+_t("CMSPUBS.HdgFootnotes")+"</h3>"),$(".footnoteLink").each(c),$(".jsBibleLink, .footnoteLink").not(a).addClass("jsNoScroll")},d(),f.listen("DOMReady",d)}),function(){"use strict";var a,b=module.require("url"),c=module.require("settings"),d=/p\d+/;a=function(a){var b,c,d,e;return e=function(a){return $("*[id$='%s'], *[class='%s']".format(a,a))},a=a.split("-"),d=a.filter(function(a){return/^[pv]([0-9]+)$/.test(a)&&e(a).exists()}),d.length?(1===d.length?d=e(d[0]):(b=e(d[0]).first(),c=e(d.pop()).last(),d=b.nextUntil(c).add(b).add(c)),d):void 0},$("a[data-highlightrange]").each(function(){var a,c;a=$(this).data("highlightrange"),c=b.parse($(this).attr("href")),c.hash.path=a,c=b.build(c),$(this).attr("href",c)}),$("*[id^='p']").each(function(){var a=$(this),b=a.attr("id");b.match(d)&&a.addClass(b)}),module.get("AnchorLinkController").addTargetResolver(function(b){var e,f,g,h=a(b),i=c.getSetting("HIGHLIGHT_CLASS");return $("."+i).removeClass(i),h?(e=$(".verse"),f=$("#article *[class^=p]").filter(function(){return this.className.match(d)}),g=e.add(f),h.length<g.length&&h.addClass(i),h.filter(":first")):void 0})}(),$(function(){"use strict";var a,b=module.require("ChildWindow");a=function(a){a.preventDefault();
var c,d;d={resizable:$(this).data("resizable")?!0:null,scrollbars:$(this).data("scroll")?!0:null,width:$(this).data("width")||null,height:$(this).data("height")||null,menubar:$(this).data("menubar")?!0:null,toolbar:$(this).data("toolbar")?!0:null,location:$(this).data("location")?!0:null},c=new b,c.setURL($(this).attr("href")),c.setOptions(d),c.open()},$(document).on("click","a.jsPopup",a)}),$(function(){"use strict";$(document).on("click",".jsPrint",function(a){a.preventDefault(),window.print()})}),function(){"use strict";var a,b,c=module.require("settings"),d=module.require("signal");a=function(a){a.preventDefault();var b=$(this);c.setPageConfig("ACCESSIBILITY_MODE",!0),b.html(_t("CMSPUBS.LnkDisableScreenReader")),b.removeClass("jsEnableAccessibilityMode"),b.addClass("jsDisableAccessibilityMode"),$("body").addClass("screenReaderMode"),d.send("EnableAccessibilityMode")},b=function(a){a.preventDefault();var b=$(this);c.setPageConfig("ACCESSIBILITY_MODE",!1),b.html(_t("CMSPUBS.LnkEnableScreenReader")),b.removeClass("jsDisableAccessibilityMode"),b.addClass("jsEnableAccessibilityMode"),$("body").removeClass("screenReaderMode"),d.send("DisableAccessibilityMode")},$(document).on("click","#accessibilitySetting a.jsEnableAccessibilityMode",a).on("click","#accessibilitySetting a.jsDisableAccessibilityMode",b),$(function(){c.getPageConfig("ACCESSIBILITY_MODE")&&$(".jsEnableAccessibilityMode").click()})}(),function(){"use strict";var a,b,c,d,e="otherContentLang",f="otherContentLangName",g=module.require("settings"),h=module.require("signal"),i=module.require("loadingIndicator");a=function(a){a.preventDefault();var c=$(this).children("option:selected"),d=c.data("url"),h=c.data("lang"),i=c.text(),j=$.cookie("ckLang"),k=["#article","#pageConfig","#bibleTitleText"];return"null"===d||""===d?!1:(h&&($.cookie(e,h,{expires:null,path:"/"}),$.cookie(f,i,{expires:null,path:"/"})),void b(d,k).done(function(){j&&($.cookie("ckLang",j,{expires:null,path:g.getPageConfig("BASE_PATH")}),window.jworg.setContentAttributes())}))},b=function(a,b){var c,d=$(b.join(", "));return i.open(),c=$.get(a),d.fadeOut(),c.fail(function(){window.location.href=a}),c.done(function(a){var c,d,e,f;for(a=$(a),i.close(),f=0;f<b.length;f++)c=b[f],d=$(c),e=a.filter(c),e=e.length>0?e:$(c,a),e.hide(),d.replaceWith(e),$(c).fadeIn();$('a[data-anchor^="#"]').each(function(){var a=$(this),b=window.location.pathname+a.data("anchor");a.attr("href",b)}),h.send("DOMReady")}),c},c=function(a){a.preventDefault();var c=$(this),d=c.children(":selected").data("url"),e=c.data("contentswap");if(e=e.split(","),e=e.length?e:["#regionPrimaryNav","#regionMain","title"],d&&d!==window.location.href){if(!(window.history&&"pushState"in window.history))return void(window.location.href=d);history.pushState("","",d),b(d,e)}},d=function(){var a=$("#otherAvailLangsChooser"),b=$.cookie(e),c=$.cookie(f),d=g.getPageConfig("CONTENT_LANG"),h=!1,i=$("#otherLangRibbon");b&&(a.find("option").each(function(a,c){var d=$(c).data("lang");h===!1&&d&&d===b&&(h=$(c))}),h&&d!==b&&(i.html(i.html().split("%%").join(c)),$(".yes",i).click(function(b){b.preventDefault();var c=a.data("autocomplete");c.selectOption(c.options.indexOf(h.val())),i.fadeOut()}),$(".no",i).click(function(a){a.preventDefault(),$.removeCookie(e,{path:"/"}),i.fadeOut()}),i.fadeIn()))},$(document).on("change",".jsReplaceContent",c),$(document).on("change","#otherAvailLangsChooser",a),d()}(),$(function(){"use strict";var a,b,c,d="open",e="showNav",f="mobileUnderlay",g=module.require("signal"),h=module.require("LanguagePicker"),i=$("#mobileNavTopBar .mobileMenu"),j=$("#mobileNavShelf .close"),k=$("#mobileNavTopBar .mobileSearch"),l=$("#mobileSearchForm .close"),m=$("#mobileNavTopBar .mobileLang"),n=$("#mobileLangShelf .close"),o=$("#mobileNav .jsExpandNav"),p=$("#mobileTOCHandle"),q=$("#mobileNav, #mobileNavShelf"),r=$("#mobileLang, #mobileLangShelf"),s=$("#mobileSearchForm"),t=$("#mobileTOC"),u=[];$(document).on("change","select.jsSubmitOnChange",function(a){a.preventDefault(),$(this.form).submit()}),$(document).on("click",".jsChooseSiteLanguage, .jsChooseSignLanguage",function(a){var b=$(this),c=new h;a.preventDefault(),c.forceOnlySL=b.hasClass("jsChooseSignLanguage"),c.open()}),b=function(){var a=$("#"+f);return a.exists()||(a=$("<div></div>"),a.attr("id",f),$("body").append(a),$("#regionMain").height(screen.height-50)),a},c=function(){var a=$("#"+f);a.exists()&&(a.remove(),$("#regionMain").height(""))},a=function(a,f,h){var j,k=!1;return j=$({isOpen:!1}),j.open=function(){_.each(u,function(a){a.close()}),j.isOpen||(b().click(j.close),a.addClass(d),h.addClass(e),j.isOpen=!0,j.trigger("open"),g.send("mediaPause")),k||(k=!0,j.trigger("first-open")),i&&i.attr("title",_t("CMSPUBS.LnkHideMenu"))},j.close=function(){c(),j.isOpen&&(a.removeClass(d),h.removeClass(e),j.isOpen=!1,j.trigger("close")),i&&i.attr("title",_t("CMSPUBS.LnkShowMenu"))},j.toggle=function(){j.isOpen?j.close():j.open()},a.click(j.toggle),f&&f.click(j.close),u.push(j),j},a(i,j,q),a(m,n,r).on("first-open",function(){var a=new h;a.open(function(){a.container.removeClass("fullScreenModalContent"),$("#mobileLang").html(a.container),$("#mobileLangShelf").append(a.container.find("p.jsLanguageCount"))})}),a(k,l,s),a(p,null,t),$("#mobileNav ul.level1 > li a").click(function(){$(this).addClass("clicked")}),o.nextAll("ul").hide(),o.click(function(){var a="expanded",b=$(this),c=b.nextAll("ul"),d=b.hasClass(a);$("#mobileNav .jsExpandNav").removeClass(a),$("#mobileNav ul.level2").not(c).stop().slideUp(),d?(b.parent("li").removeClass(a),b.attr("title",_t("CMSPUBS.LnkOpenUppCase")),c.stop().slideUp()):(b.addClass(a),$("#mobileNav li").removeClass(a),b.parent("li").addClass(a),b.attr("title",_t("CMSPUBS.LnkCloseUppCase")),c.stop().slideDown())}),o.filter(".jsPreExpand").click()}),function(){"use strict";var a,b,c,d,e,f=".jsDownload:not(.disabled)",g=".jsTourBrochureDownload:not(.disabled)",h="stream",i=module.require("settings"),j=module.require("signal"),k=module.require("browser"),l=module.require("PubMediaResource"),m=module.require("DownloadModal"),n=module.require("BibleModal"),o=module.require("TourBrochureModal"),p=module.require("VideoModal"),q=module.require("VideoBibleModal");k.supportsTemplating()&&(a=function(a){var b,c,f,g=$("body"),h=$(this),j=h.data("jsonurl"),k=h.data("page-id");if(!g.hasClass("signLanguage")||g.hasClass("publications")||!h.hasClass("jsVideoModal")||!h.hasClass("jsCoverDoc")){if(a.preventDefault(),h.hasClass("jsVideoBible"))return c=h.data("books"),f=new q(c,j),void f.open();b=new l(j),b.setPageID(k),b.isSingleFile().then(function(a){return a&&!e(h)?void(window.location.href=a):i.getSetting("USE_DOWNLOAD_WINDOW")?void(window.location.href=h.attr("href")):void d(b,h)})}},b=function(a){for(var b=a.parent();0===b.find(".cvr:first").length&&0!==b.parent().length;)b=b.parent();return b.find(".cvr:first img").attr("src")||b.find(".cvr:first").data("src")||""},e=function(a){return a.hasClass(h)?!0:a.hasClass("jsBible")&&a.closest(".jsAudioFormat").exists()?!0:!1},c=function(){var a=$(this),b=a.data("jsonurl");$.getJSONCached(b).done(function(b){0===b.files.length&&a.remove()})},d=function(a,c){var d;c.hasClass("jsTourBrochureDownload")?d=new o(a):c.hasClass("jsBible")?d=new n(a):c.hasClass("jsVideoModal")?(d=new p(a),d.setCoverDocURL(c.data("coverurl")),d.setTitle(c.data("onpagetitle")),d.setAutoPlay(!0)):d=new m(a),d.setCoverImage(b(c)),d.open()},$(document).on("click",f,a),$(document).on("click",g,a),j.listen("DOMReady",function(){$(g).each(c)}))}(),function(){"use strict";var a,b=module.require("PubMediaResource"),c=module.require("VideoModal"),d=module.require("VideoBibleModal"),e=module.require("signal");a=function(){var a,e,f,g=$(this),h=g.data("page-id"),i=g.data("style"),j=$("body").hasClass("jsBibleModal"),k=g.data("jsonurl");j?(f=g.data("books"),e=new d(f,k)):(a=new b(k,!0),a.setPageID(h),e=new c(a)),e.open(function(a){a=$(a),a.find("div.videoModal").addClass("embeddedVideo").addClass(i),g.replaceWith(a)})},e.listen("DOMReady",function(){$(".jsIncludeVideo").each(a)})}(),$(function(){"use strict";var a,b=module.require("PubMediaResource"),c=module.require("DownloadModal"),d=module.require("BibleModal");a=function(a,b){var e;e=$("body").hasClass("jsBibleModal")?new d(a):new c(a),e.setCoverImage($(".cvr img").attr("src")),a.getPubName().then(function(a){document.title=a}),e.open(function(a){b.replaceWith(a),a.find(".jsLanguageTab:first").click()})},$(".jsIncludeDownloadModal").each(function(){var c=$(this),d=new b(c.data("jsonurl"),!0);a(d,c)})}),function(){"use strict";var a,b,c;a=function(a){a.preventDefault();var c=$(this);$(".jsPublicationFilterContainer").length>1&&b(c)},b=function(a){var b,d,e=a.closest("form"),f=$(e).attr("action")+"json/filters/",g=$(e).serialize();d=$(a).parent(".jsPublicationFilterContainer").nextAll(".jsPublicationFilterContainer").find(".jsPublicationFilter"),d.each(function(){var a=$(this).data("filtertype");a&&(b=f+a+"/?"+g,$.getJSONCached(b).done(function(a){var b=$("#"+a.id);c(b,a.choices)}))})},c=function(a,b){a=$(a);var c,d,e,f,g=0,h=a.children(":selected").val();if(a.children().remove(),0===b.length)return a.closest(".jsPublicationFilterContainer").hide(),0;for(a.closest(".jsPublicationFilterContainer").show(),e=0;e<b.length;e++)d=b[e],c=$(document.createElement("option")),c.val(d.optionValue),c.html(d.optionName),c.val()===h&&(g=e,c.prop("selected",!0)),a.append(c);return f=a.data("autocomplete"),f&&f.loadOptions(),g},$(document).on("change",".jsPublicationFilter",a)}(),$(function(){"use strict";var a=module.require("settings"),b=module.require("browser");b.supportsTemplating()&&$(".jsDownload:not(.jsVideoModal.jsCoverDoc)").each(function(){var b=$(this),c=b.attr("href"),d=b.hasClass("jsBible")||b.hasClass("jsVideoBible");c=c.split("?")[1],c+="&isBible="+(d?1:0),c=a.getSetting("DOWNLOAD_WINDOW_URL")+"?"+c,b.attr("href",c)})}),function(){"use strict";var a,b=",";a=function(){var a,c,d,e=$(this),f=e.data("toggle-class"),g=e.data("toggle-target"),h=$(g);for(f=f.replace(" ","").split(b),a=0;a<f.length;a++)if(c=f[a],h.hasClass(c)){d=f[a+1]||f[0];break}d||(d=f[0]),h.removeClass(c),h.addClass(d)},$(document).on("click",".jsToggleOnClick",a),$(document).on("mouseenter mouseleave",".jsToggleOnHover",a)}(),function(){"use strict";var a,b;a=function(){var a=$(this),b=a.parents(".filterOptions").has(".filterSubOptions").children('input[type="checkbox"]'),c=b.parents(".filterOptions").find('.filterSubOptions input[type="checkbox"]'),d=c.filter(":checked").length===c.length;b.prop("checked",d)},b=function(){var a=$(this),b=a.parents(".filterOptions").find('.filterSubOptions input[type="checkbox"]');b.prop("checked",a.prop("checked"))},$(document).on("change",'.jsToggleSubOptions .filterOptions:has(.filterSubOptions) > input[type="checkbox"]',b),$(document).on("change",'.jsToggleSubOptions .filterSubOptions input[type="checkbox"]',a)}(),function(){"use strict";function a(){$(".jsRespImg").each(function(){var a=$(this);d(a)})}var b,c,d,e=module.require("signal");b=function(a,b){var d="lg",e="lg",f=c();return f?(f>=801?d="lg":f>=460?d="md":f>=241?d="sm":f>0&&240>=f&&(d="xs"),e=d,("cnt"===a.data("img-type")||"sub"===a.data("img-type"))&&(b.hasClass("threequarter")?e="xs"===d?"sm":"md":b.hasClass("half")?e="xs"===d?"xs":"sm":b.hasClass("quarter")?e="xs":"xs"===d?e="sm":"lg"!==d&&(e="md")),e):e},c=function(){var a=$(window).width();return screen&&(a=Math.max(a,screen.width,screen.height)),a},d=function(a){var c,d,e=$("<img />"),f=a.getAttributes("data-img-size-",!0),g=a.data("zoom"),h="";return $.each(a.getAttributes("data-img-att-",!0),function(a,b){e.attr(a,b)}),d=b(a,e),$.each(["xs","sm","md","lg"],function(a,b){return f.hasOwnProperty(b)&&(h=f[b]),b===d?!1:void 0}),e.data("zoom",g),e.attr("src",h),g&&!a.parents("a").exists()?(c=$("<a />"),c.addClass("zoom"),c.attr("href",g),c.attr("target","_blank"),c.append(e),void a.replaceWith(c)):void a.replaceWith(e)},e.listen("DOMReady",a)}(),$(function(){"use strict";$(".jsRandomImg").each(function(){var a=$(this),b=$("<img />"),c=a.getAttributes("data-img-",!0,!1),d=0;c.length&&(d=Math.floor(Math.random()*c.length),b.attr("src",c[d]),a.replaceWith(b))})}),$(function(){"use strict";var a,b=module.require("ImageModal");a=function(a){var c=$(this).find("img"),d=c.data("zoom")||c.attr("src"),e=new b(d);a.preventDefault(),e.open()},$(document).on("click","a.zoom",a)}),$(function(){"use strict";var a,b,c=".wide",d="jsOpenTable",e="jsCloseTable",f="popped",g=$("<div></div>"),h=$("<p></p>"),i=$("<p></p>");a=function(){var a=$(this).closest(c);a.find("."+d).hide(),a.find("."+e).show(),a.addClass(f)},b=function(){var a=$(this).closest(c);a.find("."+d).show(),a.find("."+e).hide(),a.removeClass(f)},g.addClass("wideControls"),h.addClass("openPopout").addClass(d).html(_t("CMSPUBS.LnkEnlargeScroll")).appendTo(g),i.addClass("collapsePopout").addClass(e).html(_t("CMSPUBS.LnkCloseUppCase")).hide().appendTo(g),$(c).each(function(){$(this).prepend(g.clone())}),$(document).on("click","."+d,a).on("click","."+e,b)}),function(a,b){"use strict";var c=module.require("signal"),d=module.require("autocomplete");c.listen("DOMReady",function(){var a=b("select.jsAutoComplete");a.each(function(){var a=b(this),c=a.data("max-columns")||4,e=a.hasClass("jsShowFeatured");d.init(a,{maxColumns:c,showFeatured:e})})})}(window,jQuery),$(function(){"use strict";var a,b,c,d="HAS_DISMISSED_TOU_NOTICE",e=!1;c=function(){b.slideUp(function(){b.remove()}),$.persistentData(d,!0)},a=function(){var a=$("<p></p>"),d=$(".termsLinks a.jsTermsOfUse").clone(),e=$("<button></button>");b=$("<div></div>"),a.html(_t("CMSPUBS.MsgUpdatedTermsAlert")+" "),a.append(d),e.html(_t("CMSPUBS.LnkCloseUppCase")),e.addClass("closeAlert").addClass("jsCloseModal"),b.addClass("TOUNotice"),b.append(e),b.append(a),b.hide(),$("body").append(b),b.slideDown(),e.one("click",c),d.one("click",c)},e&&!$.persistentData(d)&&setTimeout(a,1e3)}),function(){"use strict";var a,b=module.require("signal"),c=module.require("browser"),d=module.require("StreamingController");a=function(){$(".jsMediaPlayer:not(.jsMediaPlayerLoaded)").each(function(){var a=$(this),b=a.data("jsonurl");d.from_url(b,a)})},b.listen("DOMReady",function(){c.isIOS()&&$(".jsAudioPlayer, .jsVideoPlayer").addClass("iosPlayer"),a()})}(),function(){"use strict";var a,b=module.require("signal");a=function(){$("body").removeClass("noJS").addClass("yesJS")},a(),b.listen("DOMReady",function(){a(),$(".hideObj, .showObj, .jsHide").each(function(){var a=$(this);!function(){var b=a.css("display");a.css("display",b),a.removeClass("hideObj").removeClass("showObj").removeClass("jsHide")}()})})}(),$(function(){"use strict";var a,b,c="BibleNavigationPinIsDisabled",d="unpinned",e=$(".jsBibleNav .jsPinToggle"),f=module.require("settings");b=function(a){var b=a.closest(".jsBibleNav"),e=b.next(".jsViewportPinWrapper").children(".jsViewportPin");b.prependTo(e),a.removeClass(d),f.setPageConfig(c,!1)},a=function(a){var b=a.closest(".jsBibleNav"),e=b.closest(".jsViewportPinWrapper");b.insertBefore(e),a.addClass(d),f.setPageConfig(c,!0)},e.click(function(){var c=$(this);c.hasClass(d)?b(c):a(c)}),f.getPageConfig(c)&&a(e)}),function(){"use strict";var a,b="[data-json-schema]",c=module.require("Chart"),d=module.require("settings"),e=module.require("signal"),f=d.getSetting("IS_RTL"),g="jsChart";a=function(){var a,b=$(this),d=b.data("json-id"),e=b.data("json-schema"),h=b.data("json-config"),i=b.data("json-payload");d&&e&&h&&i&&(a=$.extend(!0,{RTL:f},h,i),b.children().hide(),b.append('<div id="'+d+'" class="'+g+'" />'),new c(e,d,a).create())},Modernizr.canvas&&e.listen("DOMReady",function(){$(b).each(a)})}(),function(){"use strict";var a,b,c,d,e,f,g=$("body"),h=["mid1001061173","mid1001061175"],i=module.require("settings");g.hasClass("BiblePublicationArticle")&&-1!==h.indexOf(g.attr("id"))&&(a=$("#article p.docNav"),b=a.find("a"),c=$(".jsViewportPin"),d=$("#article h2"),e=module.get("AnchorLinkController"),b.removeAttr("target"),c.exists()&&a.exists()&&a.appendTo(c),d.each(function(){var a=$(this),b=$("<a></a>").html(a.html()),c=a.next();a.html(b),a.addClass("jsExpandCollapse").addClass("viewHdgCollapse").data("expandaction","viewHdgCollapse").data("collapseaction","viewHdgExpand"),b.append($("<span></span>").addClass("accordionSprite")),c.addClass("jsCollapsableBlock").hide()}),f=function(a){var b,c,d=$("#"+a),f=i.getSetting("HIGHLIGHT_CLASS");if(d.exists()&&(c=d.is("h2")?d.next("ul"):d.closest("ul"),b=c.prev("h2"),c.exists()&&b.exists()))return b.filter(".viewHdgCollapse").click(),c.promise().done(function(){e.scrollTo(d)}),$("."+f).removeClass(f),d.addClass(f),d},e.addTargetResolver(f))}(),$(function(){"use strict";if($("body").hasClass("SearchPage")){var a=module.require("url"),b=$("#insightAnalytics").data("search_id"),c=parseInt(a.parse().query.s||0,10);$("#SearchResultsList > div").each(function(){var d=$(this);d.find("a").each(function(){var e=$(this),f=e.attr("href");f=a.parse(f),f.hash.query.insight=f.hash.query.insight||{},f.hash.query.insight=$.extend(f.hash.query.insight,{search_id:b,search_result_index:c+d.index()}),f=a.build(f),e.attr("href",f)})}),$(".pageNumLinks a").each(function(){var c=$(this),d=c.attr("href");d=a.parse(d),d.hash.query.insight=d.hash.query.insight||{},d.hash.query.insight.search_id=b,d=a.build(d),c.attr("href",d)})}});
//# sourceMappingURL=cms.js.map